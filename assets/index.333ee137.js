import{R as e,a as t}from"./vendor.cd7509fb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function a(){const t=new RTCPeerConnection({iceServers:[{urls:["stun:stun1.1.google.com:19302","stun:stun2.1.google.com:19302"]}],iceCandidatePoolSize:10});t.createDataChannel("channel"),t.onicecandidate=()=>{const e=t.localDescription;let a=document.querySelector(".peer-offer"),n=document.querySelector(".peer-activate");"offer"===e.type&&(a.value=JSON.stringify(e)),"answer"===e.type&&(n.value=JSON.stringify(e))};let a=null,c=null;return e.createElement("div",{className:"app"},e.createElement("div",{className:"wrapper"},e.createElement("div",{className:"local-stream"},"Local Stream",e.createElement("video",{id:"webcamVideo",autoPlay:!0,muted:!0})),e.createElement("div",{className:"remote-stream"},"Remote Stream",e.createElement("video",{id:"remoteVideo",autoPlay:!0})),e.createElement("button",{className:"btn",onClick:async function(){a=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),c=new MediaStream,a.getTracks().forEach((e=>{t.addTrack(e,a)})),t.ontrack=e=>{e.streams[0].getTracks().forEach((e=>{c.addTrack(e)}))},document.querySelector("#webcamVideo").srcObject=a,document.querySelector("#remoteVideo").srcObject=c}},"Get video stream"),e.createElement("hr",{className:"hr-1"}),e.createElement("div",{className:"set-up-connection"},e.createElement("h2",{className:"set-up-connection__title"},"Set Up Connection"),e.createElement("form",{onSubmit:e=>{e.preventDefault(),async function(e){const[t,a]=await async function(e){try{return[await e.createOffer(),null]}catch(a){return[null,a]}}(e);n(e,t)}(t)},className:"create-offer"},e.createElement("fieldset",{className:"offer__fieldset"},e.createElement("legend",{className:"offer__legend"},"Offer"),e.createElement("input",{className:"offer__input peer-offer",type:"text",name:"offer",placeholder:"Click on button to create offer",autoComplete:"off"}),e.createElement("button",{type:"submit",className:"btn create-offer-btn"},"Create Offer"))),e.createElement("form",{onSubmit:e=>{e.preventDefault();const a=e.target.answer.value;!async function(e,t){const a=new RTCSessionDescription(t);r(e,a);const[c,o]=await async function(e){try{return[await e.createAnswer(),null]}catch(o){return[null,o]}}(e);n(e,c)}(t,JSON.parse(a))},className:"create-answer"},e.createElement("fieldset",{className:"offer__fieldset"},e.createElement("legend",{className:"offer__legend"},"Answer"),e.createElement("input",{className:"offer__input peer-answer",type:"text",name:"answer",placeholder:"Paste offer and create answer",required:!0,autoComplete:"off"}),e.createElement("button",{type:"submit",className:"btn create-answer-btn"},"Create answer"))),e.createElement("form",{onSubmit:e=>{e.preventDefault();const a=e.target.activate.value;!async function(e,t){const a=new RTCSessionDescription(t);r(e,a)}(t,JSON.parse(a))},className:"activate-offer"},e.createElement("fieldset",{className:"offer__fieldset"},e.createElement("legend",{className:"offer__legend"},"Activate"),e.createElement("input",{className:"offer__input peer-activate",type:"text",name:"activate",placeholder:"Paste answer and activate offer",required:!0,autoComplete:"off"}),e.createElement("button",{type:"submit",className:"btn activate-offer-btn"},"Activate Offer"))))))}function n(e,t){e.setLocalDescription(t).then((()=>{console.log("Local Description Set  Successfully")})).catch((e=>{console.log(e)}))}function r(e,t){e.setRemoteDescription(t).then((()=>{console.log("Remote Description Set Successfully")})).catch((e=>{console.log(e)}))}t.render(e.createElement(e.StrictMode,null,e.createElement(a,null)),document.getElementById("root"));
